"use strict";(self.webpackChunkmulti_counter=self.webpackChunkmulti_counter||[]).push([[691],{9723:function(e,t,l){l.r(t),l.d(t,{default:function(){return i}});var a=l(7294);var n=({value:e=0,update:t})=>a.createElement("div",{className:"counter-module--counter--2Dv6q"},a.createElement("button",{className:"counter-module--decrementButton--3KpC6",onClick:()=>{e<=0||t(e-1)}}),a.createElement("span",{className:"counter-module--value--ygrTP"},e),a.createElement("button",{className:"counter-module--incrementButton--d5zmp",onClick:()=>{t(e+1)}}));var u=({prop:e,shouldFocus:t,update:l,remove:u})=>{const r=(0,a.useRef)(null);return(0,a.useEffect)((()=>{t&&r.current.focus()}),[]),a.createElement("div",{className:"counterWithLabel-module--counterWithLabel--39Zi7"},a.createElement("input",{className:"counterWithLabel-module--label--2P_Sz",defaultValue:e.label,placeholder:"カウンター名",ref:r,onInput:t=>{l({...e,label:t.currentTarget.value})}}),a.createElement("div",{className:"counterWithLabel-module--counterRow--2D_g6"},a.createElement(n,{value:e.value,update:t=>{l({...e,value:t})}})),a.createElement("button",{className:"counterWithLabel-module--closeButton--3Koff",onClick:()=>u()}))};const r=(0,a.createContext)({load:()=>null,save:()=>{}}),o="counter-list",c={load:()=>{if("undefined"==typeof localStorage)return null;const e=localStorage.getItem(o);return e?JSON.parse(e):null},save:e=>{"undefined"!=typeof localStorage&&localStorage.setItem(o,JSON.stringify(e))}};var s=l(2755),d=l(9470);const m=(e,t)=>{let l;switch(t.type){case"init":return t.props;case"append":return l=[...e,t.prop],c.save(l),l;case"update":return l=[...e],l[t.index]=t.prop,c.save(l),l;case"remove":return l=e.filter(((e,l)=>l!==t.index)),c.save(l),l;default:return t}};var i=()=>{const{0:e,1:t}=(0,a.useState)(0),{0:l,1:n}=(0,a.useState)(-1),{0:o,1:i}=(0,a.useReducer)(m,[]);return(0,a.useEffect)((()=>{var e;const l=null!==(e=c.load())&&void 0!==e?e:[],a=l.length>0?l[l.length-1].id+1:0;t(a),i({type:"init",props:l})}),[]),a.createElement(r.Provider,{value:c},a.createElement(s.Z,null,a.createElement(d.Z,null),a.createElement("div",{className:"index-module--counterList--2lrXi"},o.map(((e,t)=>a.createElement(u,{prop:e,shouldFocus:e.id===l,update:e=>i({type:"update",index:t,prop:e}),remove:()=>i({type:"remove",index:t}),key:e.id}))),a.createElement("button",{className:"index-module--appendButton--2Vm-b",onClick:()=>{i({type:"append",prop:{id:e,label:"",value:0}}),n(e),t(e+1)}}))))}}}]);
//# sourceMappingURL=component---src-pages-index-tsx-97713abfffd826256e5c.js.map